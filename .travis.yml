language: java

sudo: false

jdk:
  - oraclejdk8
  - openjdk8
  - oraclejdk9

env:
  - JAVA_TOOL_OPTIONS="$JAVA_TOOL_OPTIONS -Xdoclint:none"

cache:
  directories:
    - '$HOME/.m2'

install:
  - ./install-maven-dependencies.sh

after_success:
  - curl "https://oss.sonatype.org/service/local/repositories/releases/content/com/codacy/codacy-coverage-reporter/2.0.2/codacy-coverage-reporter-2.0.2-assembly.jar" -o ~/codacy.coverage-reporter-2.0.2-assembly.jar
  - java -cp ~/codacy.coverage-reporter-2.0.2-assembly.jar com.codacy.CodacyCoverageReporter -l Java -r target/site/jacoco/jacoco.xml --projectToken "${CODACY_PROJECT_TOKEN}"

